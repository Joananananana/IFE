<div id="fade-obj" style="width:300px;height:300px;background:#000; "></div>
<button id="fade-btn" >淡出</button> 
<script>
    window.onload=function(){
        document.getElementById("fade-btn").onclick=opacityA;
    }
    var btn=document.getElementById("fade-btn");
    var obj=document.getElementById("fade-obj");

    //使用setTimeout
    var opa=1;
    function opacityA(){
            btn.disabled=true;
            opa-=0.01;
            console.log(opa); 
            t=setTimeout(" opacityA() ",20);
            obj.style.opacity=opa;
            if(opa<=0){
                btn.disabled=false;
                btn.innerHTML="淡入"; 
                clearTimeout(t);
                btn.addEventListener("click",opacityB);
            }
    }
    function opacityB(){
            btn.disabled=true;
            opa+=0.01;
            console.log(opa); 
            t=setTimeout(" opacityB() ",20);
            obj.style.opacity=opa;
            if(opa>1){
                btn.disabled=false;
                btn.innerHTML="淡出";
                btn.addEventListener("click",opacityA); 
                clearTimeout(t);
            }
            
        }




    //使用setInterval
    
    // function opacityA(){
    //     var bb=0;
    //     var aa=1;
    //     if(btn.innerHTML=="淡出"){
    //         var out=setInterval(tide,20);
    //         btn.disabled=true;
    //         function tide(){
    //             aa-=0.01;
    //             obj.style.opacity=aa;
    //             console.log(aa);
    //             if(aa<=0)
    //             {
    //                 clearInterval(out);
    //                 btn.disabled=false;
    //                 btn.innerHTML="淡入";
    //             }
    //         }
    //     }
    //     if(btn.innerHTML=="淡入"){
    //         var int=setInterval(tide,20);
    //         btn.disabled=true;
    //         function tide(){
    //             bb+=0.01;
    //             obj.style.opacity=bb;
    //             console.log(bb);
    //             if(bb>=1)
    //             {
    //                 clearInterval(int);
    //                 btn.disabled=false;
    //                 btn.innerHTML="淡出";
    //             }
    //         }
    //     }
        
    // }
    
</script>